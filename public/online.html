<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Handjet:wght@100..900&family=Playpen+Sans+Arabic:wght@100..800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f9fa;
      direction: rtl;
      text-align: right;
      
.handjet-<uniquifier> {
  font-family: "Handjet", sans-serif;
  font-optical-sizing: auto;
  font-weight: <weight>;
  font-style: normal;
  font-variation-settings:
    "ELGR" 1,
    "ELSH" 2;
}
}
.sidebar {
      background: linear-gradient(to bottom, #007bff, #0056b3);
      color: white;
      min-height: 100vh;
      padding-top: 30px;
      transition: transform 0.3s ease;
}
.sidebar.hidden {
      transform: translateX(100%);
}
.sidebar a {
      color: white;
      display: block;
      padding: 10px 20px;
      text-decoration: none;
      background: #0088FF; 
      margin-top: 3px;
}
.sidebar a:hover {
      background-color: #0056b3;
}
.header-logo {
      font-size: 28px;
      font-weight: bold;
      color: #007bff;
      margin-bottom: 20px;
      animation: fadeInUp 1s ease-out;
}
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: translateY(0);}
}
.user-card {
      background-color: white;
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      display: flex;
      align-items: center;
      animation: glow 3s infinite alternate;
}
    @keyframes glow {
      from { border-color: #007bff;}
      to { border-color: #17a2b8;}
}
.user-card img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-left: 15px;
}
.user-info {
      flex-grow: 1;
}
.user-info h4 {
      font-size: 16px;
      margin-bottom: 5px;
}
.user-info p {
      font-size: 13px;
      margin: 0;
}
.footer {
      background-color: #17a2b8;
      color: white;
      padding: 10px;
      text-align: center;
      margin-top: 40px;
}
    #menuToggle {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 1000;
      display: none; 
}
  </style>
</head>
<body>
  <button class="btn btn-light d-md-none" id="menuToggle">
    <i class="fas fa-bars"></i>
  </button>

  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <nav class="col-md-3 sidebar" id="sidebar">
        <div class="text-center mb-4">
          <i class="fas fa-robot fa-2x"></i>
          <div class="mt-2">RAZER BOT</div>
        </div>
        <a href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒÙˆÙƒÙŠØ²</a>
        <a href="/step_by_step_guide">Ø¯Ù„ÙŠÙ„ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©</a>
        <a href="online_user">Ø§Ù„Ù†Ø´Ø·ÙˆÙ†</a>
      </nav>

      <!-- Main Content -->
      <main class="col-md-9 p-4">
        <h2 class="header-logo text-center">ðŸŸ¢ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§ </h2>
        <div id="user_online"></div>
      </main>
    </div>
  </div>

  <div class="footer">
    ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Rako San
  </div>

  <!-- Scripts -->
  <script>
    document.getElementById("menuToggle").addEventListener("click", () => {
      document.getElementById("sidebar").classList.toggle("hidden");
});

    async function listOfAi() {
      const userOnline = document.getElementById("user_online");
      try {
        const response = await fetch("/info");
        const data = await response.json();
        userOnline.innerHTML = '';
        data.forEach(user => {
        const { name, thumbSrc, profileUrl, time} = user;
          const userCard = document.createElement('div');
          userCard.className = 'user-card';

          const image = document.createElement('img');
          image.src = thumbSrc;
          image.alt = 'ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…';

          const userInfo = document.createElement('div');
          userInfo.className = 'user-info';

          const userName = document.createElement('h4');
          userName.textContent = name;

          const profileLink = document.createElement('p');
          profileLink.innerHTML = `<a href="${profileUrl}" target="_blank">${profileUrl}</a>`;

          const uptimeUser = document.createElement('p');
          uptimeUser.className = 'uptime-user';
          uptimeUser.innerHTML = `Ù…Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„: ${timeFormat(time)}`;

          userInfo.appendChild(userName);
          userInfo.appendChild(profileLink);
          userInfo.appendChild(uptimeUser);
          userCard.appendChild(image);
          userCard.appendChild(userInfo);
          userOnline.appendChild(userCard);

          setInterval(() => {
            user.time++;
            updateTimer(userCard, user.time);
}, 1000);
});
} catch (error) {
        console.error(error);
        userOnline.innerHTML = `<div class="alert alert-danger" role="alert">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</div>`;
}
}

    function updateTimer(userCard, currentTime) {
      const uptimeUser = userCard.querySelector('.uptime-user');
      uptimeUser.textContent = `Ù…Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„: ${timeFormat(currentTime)}`;
}

    function timeFormat(currentTime) {
      const days = Math.floor(currentTime / (3600 * 24));
      const hours = Math.floor((currentTime % (3600 * 24)) / 3600);
      const minutes = Math.floor((currentTime % 3600) / 60);
      const seconds = currentTime % 60;

      let timeFormat = '';
      if (days> 0) timeFormat += `${days} ÙŠÙˆÙ… `;
      if (hours> 0) timeFormat += `${hours} Ø³Ø§Ø¹Ø© `;
      if (minutes> 0) timeFormat += `${minutes} Ø¯Ù‚ÙŠÙ‚Ø© `;
      timeFormat += `${seconds} Ø«Ø§Ù†ÙŠØ©`;

      return timeFormat.trim();
}

    listOfAi();
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
