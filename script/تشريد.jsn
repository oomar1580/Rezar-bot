module.exports.config = {
  name: "ุชุดุฑูุฏ",
  eventType: ["message"],
  version: "1.0.0",
  credits: "YourName",
  description: "ุชุบููุฑ ุงุณู ุงููุฌููุนุฉ ูุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู ุญุชู ูููู ุงูุฃุฏูู ุจุฅููุงูู",
};

let isRunning = false; // ูุชุญุฏูุฏ ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุดุบุงูุฉ ุฃู ูุง
let customMessage = "ุงูุฑุณุงูุฉ ุงูุชู ุณูุฑุฏ ุจูุง ุงูุจูุช"; // ุงูุฑุณุงูุฉ ุงูุชู ุณูุฑุฏ ุจูุง ุงูุจูุช
let adminID = null; // ูุญูุธ ูุนุฑู ุงูุฃุฏูู ุงูุฐู ุจุฏุฃ ุงูุนูููุฉ

module.exports.run = async function ({ api, event, Threads, Users }) {
  const { threadID, senderID, messageText } = event;

  // ุงูุญุตูู ุนูู ูุนูููุงุช ุงููุฌููุนุฉ (ุงูุชุฃูุฏ ูู ุฃู ุงููุฑุณู ูู ุงูุฃุฏูู)
  const threadInfo = await api.getThreadInfo(threadID);

  // ุชุนููู ุงูุฃุฏูู ุงูุฐู ุจุฏุฃ ุงูุนูููุฉ (ูุฌุจ ุฃู ูููู ุงูุฃุฏูู ุงูุฐู ูุฑุณู "ูุถุน-ุชุดุฑูุฏ")
  if (messageText.toLowerCase() === "ูุถุน-ุชุดุฑูุฏ" && !isRunning && threadInfo.adminIDs.includes(senderID)) {
    // ุชุบููุฑ ุงุณู ุงููุฌููุนุฉ
    await api.setTitle(" ุฅูุจุฑุงุทูุฑูุฉ ูุงูููู ๐โค๏ธโ๐ฉน  ", threadID);

    // ุชูุนูู ุงููุถุน
    isRunning = true;
    adminID = senderID;  // ุญูุธ ุงูุฃุฏูู ุงูุฐู ูุงู ุจุชูุนูู ุงูุฃูุฑ
    customMessage = " ุงุฑุฑุฑุฑุฑุฑุฑูุนู ุจูุณููููู ุฒุจู ูููุงุชูููู ๐ฅ๐ฅ๐   "; // ููููู ุชุนุฏูู ูุฐู ุงูุฑุณุงูุฉ ุญุณุจ ุฑุบุจุชู

    return api.sendMessage("ุชู ุชูุนูู ูุถุน ุชุดุฑูุฏ! ุงูุจูุช ุงูุขู ุณูุฑุฏ ุนูู ุฌููุน ุงูุฑุณุงุฆู.", threadID);
  }

  // ุฅุฐุง ูุงู ุงูุจูุช ูู ูุถุน ุงูุฑุฏ ุงููุณุชูุฑุ ูุฑุฏ ุนูู ุฃู ุดุฎุต
  if (isRunning) {
    // ุฅุฐุง ูุงู ุงููุฑุณู ููุณ ุงูุฃุฏูู ุงูุฐู ุจุฏุฃ ุงูุฃูุฑ
    if (senderID !== adminID) {
      api.sendMessage(customMessage, threadID); // ุงูุฑุฏ ุจุฑุณุงูุฉ ูุนููุฉ
    }
  }

  // ุฅููุงู ุงูุนูููุฉ ุนูุฏูุง ูุฑุณู ุงูุฃุฏูู "ุฅููุงู"
  if (messageText.toLowerCase() === "ุฅููุงู" && senderID === adminID) {
    isRunning = false;
    return api.sendMessage("ุชู ุฅููุงู ูุถุน ุชุดุฑูุฏ.", threadID);
  }
};
